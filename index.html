<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–±–µ—Ä–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø–∞–ø—ã</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(145deg, #0f1a2f, #1b2b4e);
            font-family: 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(4px);
            border-radius: 48px;
            padding: 30px;
            border: 2px solid rgba(255, 215, 0, 0.4);
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        }

        h1 {
            text-align: center;
            color: #ffd966;
            font-size: 2.5rem;
            text-shadow: 0 0 15px gold;
            font-weight: 400;
            letter-spacing: 2px;
            margin-bottom: 20px;
        }

        /* –æ—Ç–∫—Ä—ã—Ç–∫–∞ */
        .card-wrapper {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .card {
            width: 300px;
            height: 300px;
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWigIyrc6sFSV8AHGHoW4WQJrRD9P0y-8fqQ&s'); /* –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–Æ –ö–ê–†–¢–ò–ù–ö–£ */
            background-size: cover;
            background-position: center;
            border-radius: 40px;
            border: 5px solid #ffd966;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            filter: blur(10px);
            transition: filter 0.3s ease;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ —Å–ª–æ–≤–∞–º–∏ (–∏—Å—Ö–æ–¥–Ω—ã–µ) */
        .words-pool {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 30px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 60px;
            border: 2px dashed #ffd966;
            margin-bottom: 30px;
            min-height: 120px;
        }

        /* –°–ª–æ—Ç—ã (–º–µ—Å—Ç–∞ –¥–ª—è —Å–ª–æ–≤) */
        .slots {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0 30px;
        }

        .slot {
            width: 140px;
            height: 100px;
            background: rgba(0, 0, 0, 0.5);
            border: 3px solid #ffd966;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 0 black;
            transition: all 0.2s;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
        }

        .slot.filled {
            background: rgba(255, 215, 0, 0.2);
            border-color: gold;
        }

        /* –°—Ç–∏–ª–∏ —Å–ª–æ–≤ (–≥–∞–∑–µ—Ç–Ω—ã–µ –≤—ã—Ä–µ–∑–∫–∏) */
        .word {
            padding: 15px 25px;
            font-size: 2rem;
            font-weight: bold;
            background: #fef7e0;
            color: #1e2b3a;
            border: 3px solid #8b6e4b;
            box-shadow: 6px 6px 0 #4a3c28, 0 0 0 2px #f0dbb0 inset;
            cursor: grab;
            transition: 0.1s;
            transform: rotate(var(--rot, 0deg));
            border-radius: 8px 20px 20px 8px;
            font-family: 'Courier New', 'Times New Roman', serif;
            text-transform: uppercase;
            user-select: none;
        }

        .word:active {
            cursor: grabbing;
            opacity: 0.8;
        }

        /* –†–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ –¥–ª—è –≥–∞–∑–µ—Ç–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ */
        .word:nth-child(odd) {
            --rot: -3deg;
            background: #f8e9d2;
            font-family: 'Impact', 'Arial Black', sans-serif;
        }
        .word:nth-child(3n) {
            --rot: 4deg;
            background: #fff3c9;
            font-family: 'Georgia', serif;
            text-transform: none;
        }
        .word:nth-child(5n+2) {
            --rot: -2deg;
            background: #f0e0c0;
            font-family: 'Verdana', sans-serif;
        }

        /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ */
        .congrats {
            text-align: center;
            color: #ffd966;
            font-size: 2rem;
            margin-top: 20px;
            font-weight: bold;
            text-shadow: 0 0 20px gold;
            opacity: 0;
            transition: 0.5s;
        }

        .congrats.show {
            opacity: 1;
        }

        .footer {
            color: rgba(255,255,255,0.5);
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ –°–û–ë–ï–†–ò –ü–û–ó–î–†–ê–í–õ–ï–ù–ò–ï</h1>

        <!-- –û—Ç–∫—Ä—ã—Ç–∫–∞ -->
        <div class="card-wrapper">
            <div class="card" id="greetingCard"></div>
        </div>

        <!-- –ú–µ—Å—Ç–æ, –æ—Ç–∫—É–¥–∞ –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å —Å–ª–æ–≤–∞ -->
        <div class="words-pool" id="wordsPool"></div>

        <!-- –°–ª–æ—Ç—ã, –∫—É–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å —Å–ª–æ–≤–∞ -->
        <div class="slots" id="slotsContainer"></div>

        <!-- –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å—ë —Å–æ–±—Ä–∞–Ω–æ) -->
        <div class="congrats" id="congratsMessage">üéñÔ∏è –°–ü–ê–°–ò–ë–û, –ó–ê–©–ò–¢–ù–ò–ö! üéñÔ∏è</div>

        <div class="footer">
            –ü–µ—Ä–µ—Ç–∞—â–∏ —Å–ª–æ–≤–∞ –≤ —Å–ª–æ—Ç—ã ‚Äî –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø—Ä–æ—è–≤–∏—Ç—Å—è
        </div>
    </div>

    <script>
        (function() {
            // ========== –ù–ê–°–¢–†–û–ô–ö–ò (–º–µ–Ω—è–π –∑–¥–µ—Å—å) ==========
            const correctOrder = ["–ü–ê–ü–ê", "–¢–´", "–õ–£–ß–®–ò–ô", "–ó–ê–©–ò–¢–ù–ò–ö"];
            const INITIAL_BLUR = 10; // –Ω–∞—á–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
            // =============================================

            let shuffled = [...correctOrder];
            shuffleArray(shuffled);

            const wordsPool = document.getElementById('wordsPool');
            const slotsContainer = document.getElementById('slotsContainer');
            const card = document.getElementById('greetingCard');
            const congrats = document.getElementById('congratsMessage');

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ
            card.style.filter = `blur(${INITIAL_BLUR}px)`;

            // –•—Ä–∞–Ω–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: –æ–∂–∏–¥–∞–µ–º–æ–µ —Å–ª–æ–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—Ç–∞
            function createSlots() {
                slotsContainer.innerHTML = '';
                for (let i = 0; i < correctOrder.length; i++) {
                    const slot = document.createElement('div');
                    slot.className = 'slot';
                    slot.dataset.index = i;
                    slot.dataset.expected = correctOrder[i];
                    slot.dataset.filled = 'false';
                    // –†–∞–∑—Ä–µ—à–∞–µ–º —Å–ª–æ—Ç—É –±—ã—Ç—å —Ü–µ–ª—å—é –¥–ª—è —Å–±—Ä–æ—Å–∞
                    slot.addEventListener('dragover', (e) => e.preventDefault());
                    slot.addEventListener('drop', handleSlotDrop);
                    slotsContainer.appendChild(slot);
                }
            }

            // –°–æ–∑–¥–∞—ë–º —Å–ª–æ–≤–∞ –≤ –ø—É–ª–µ (–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ)
            function createWords(wordsArray) {
                wordsPool.innerHTML = '';
                wordsArray.forEach((wordText) => {
                    const word = createWordElement(wordText);
                    wordsPool.appendChild(word);
                });
            }

            // –§–∞–±—Ä–∏–∫–∞ —Å–ª–æ–≤
            function createWordElement(text) {
                const word = document.createElement('div');
                word.className = 'word';
                word.textContent = text;
                word.setAttribute('draggable', 'true');
                word.setAttribute('data-word', text);
                word.addEventListener('dragstart', handleDragStart);
                word.addEventListener('dragend', handleDragEnd);
                return word;
            }

            // Drag handlers
            let draggedElement = null;

            function handleDragStart(e) {
                draggedElement = this;
                e.dataTransfer.setData('text/plain', this.textContent);
                this.style.opacity = '0.5';
            }

            function handleDragEnd(e) {
                this.style.opacity = '1';
                // –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º draggedElement —Å—Ä–∞–∑—É, —Ç.–∫. –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –≤ drop
                // –°–±—Ä–æ—Å–∏–º –ø–æ—Å–ª–µ drop
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±—Ä–æ—Å–∞ –≤ —Å–ª–æ—Ç
            function handleSlotDrop(e) {
                e.preventDefault();
                if (!draggedElement) return;

                const slot = e.currentTarget;
                // –°–ª–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç
                if (slot.dataset.filled === 'true') return;

                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ —Å–ª–æ—Ç
                const word = draggedElement;
                // –ï—Å–ª–∏ —Å–ª–æ–≤–æ —É–∂–µ –≤ –ø—É–ª–µ, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—â–∞–µ–º
                // –ï—Å–ª–∏ —Å–ª–æ–≤–æ –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Å–ª–æ—Ç–∞? –ó–∞–ø—Ä–µ—Ç–∏–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∏–∑ —Å–ª–æ—Ç–∞ –≤ —Å–ª–æ—Ç, —Ä–∞–∑—Ä–µ—à–∏–º —Ç–æ–ª—å–∫–æ –∏–∑ –ø—É–ª–∞.
                // –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–æ–¥–∏—Ç–µ–ª—è: –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å ‚Äî wordsPool, —Ç–æ –º–æ–∂–Ω–æ.
                if (word.parentNode !== wordsPool) return; // —Ä–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∑ –ø—É–ª–∞

                // –ü–æ–º–µ—â–∞–µ–º —Å–ª–æ–≤–æ –≤ —Å–ª–æ—Ç
                slot.appendChild(word);
                slot.dataset.filled = 'true';
                slot.classList.add('filled');
                word.style.opacity = ''; // –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

                // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑–º—ã—Ç–∏—è
                updateBlur();

                // –°–±—Ä–æ—Å draggedElement
                draggedElement = null;
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±—Ä–æ—Å–∞ –≤ –ø—É–ª (–≤–æ–∑–≤—Ä–∞—Ç —Å–ª–æ–≤–∞ –∏–∑ —Å–ª–æ—Ç–∞)
            wordsPool.addEventListener('dragover', (e) => e.preventDefault());
            wordsPool.addEventListener('drop', (e) => {
                e.preventDefault();
                if (!draggedElement) return;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–ª–æ—Ç–µ
                const sourceSlot = draggedElement.closest('.slot');
                if (!sourceSlot) return; // —Ä–∞–∑—Ä–µ—à–∞–µ–º –≤–æ–∑–≤—Ä–∞—Ç —Ç–æ–ª—å–∫–æ –∏–∑ —Å–ª–æ—Ç–∞

                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ –ø—É–ª
                wordsPool.appendChild(draggedElement);

                // –û—á–∏—â–∞–µ–º —Å–ª–æ—Ç
                sourceSlot.dataset.filled = 'false';
                sourceSlot.classList.remove('filled');

                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
                draggedElement.style.opacity = '';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º—ã—Ç–∏–µ
                updateBlur();

                draggedElement = null;
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º—ã—Ç–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
            function updateBlur() {
                const slots = document.querySelectorAll('.slot');
                let correctCount = 0;
                slots.forEach(slot => {
                    if (slot.dataset.filled === 'true') {
                        const wordEl = slot.querySelector('.word');
                        if (wordEl && wordEl.textContent === slot.dataset.expected) {
                            correctCount++;
                        }
                    }
                });

                // –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ
                if (correctCount === correctOrder.length) {
                    congrats.classList.add('show');
                } else {
                    congrats.classList.remove('show');
                }

                // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º—ã—Ç–∏–µ: –æ—Ç INITIAL_BLUR –¥–æ 0 –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—Å—Ç–∞–≤—à–∏–º—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º
                // –ß–µ–º –±–æ–ª—å—à–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö, —Ç–µ–º –º–µ–Ω—å—à–µ —Ä–∞–∑–º—ã—Ç–∏–µ
                const total = correctOrder.length;
                const blurValue = INITIAL_BLUR * (1 - correctCount / total);
                card.style.filter = `blur(${blurValue}px)`;
            }

            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ
            function shuffleArray(arr) {
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            function init() {
                createSlots();
                createWords(shuffled);
                updateBlur();
            }

            init();
        })();
    </script>
</body>
</html>
